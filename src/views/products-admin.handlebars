<!-- /src/views/products-admin.handlebars -->
<div class="container py-4">

  <!-- ✅ Formulario de creación de producto -->
  <div class="card mb-5 shadow-sm">
    <div class="card-body">
      <h5 class="card-title mb-3">Crear Nuevo Producto</h5>
      <form method="POST" action="/api/products">
        <div class="row g-3">
          <div class="col-md-6">
            <input type="text" class="form-control" name="title" placeholder="Título" required />
          </div>
          <div class="col-md-6">
            <input type="text" class="form-control" name="description" placeholder="Descripción" required />
          </div>
          <div class="col-md-4">
            <input type="text" class="form-control" name="code_bar" placeholder="Código de barras" />
          </div>
          <div class="col-md-2">
            <input type="number" class="form-control" name="price" placeholder="Precio" required />
          </div>
          <div class="col-md-2">
            <input type="number" class="form-control" name="stock" placeholder="Stock" required />
          </div>
          <div class="col-md-2">
            <input type="text" class="form-control" name="category" placeholder="Categoría" />
          </div>
          <div class="col-md-2">
            <input type="number" class="form-control" name="num" placeholder="Código interno" required />
          </div>
          <div class="col-md-12">
            <input type="text" class="form-control" name="thumbnails" placeholder="URLs de imagen (separadas por coma)" />
          </div>
        </div>
        <div class="d-grid mt-3">
          <button type="submit" class="btn btn-success">Crear Producto</button>
        </div>
      </form>
    </div>
  </div>

  <!-- ✅ Tarjetas de productos -->
  <div class="row g-4">
    {{#each products}}
    <div class="col-md-4">
      <div class="card h-100 shadow-sm border-0 position-relative">

        <!-- Botón de eliminación -->
        <button class="btn btn-outline-danger btn-sm position-absolute top-0 start-0 m-2"
          onclick='eliminarProducto("{{this._id}}")'>
          Eliminar
        </button>

        <!-- Botón de edición -->
        <button class="btn btn-outline-warning btn-sm position-absolute top-0 end-0 m-2"
          onclick='editarProducto("{{this._id}}", "{{this.title}}", "{{this.description}}", "{{this.price}}", "{{this.num}}", "{{this.stock}}", "{{this.category}}")'>
          Editar
        </button>

        <div class="card-body pt-5">
          <h5 class="card-title">{{this.title}}</h5>
          <p class="card-text text-muted">{{this.description}}</p>
          <p class="mb-1"><strong>Precio:</strong> ${{this.price}}</p>
          <p class="mb-1"><strong>Stock:</strong> {{this.stock}}</p>
          <p class="mb-1"><strong>Categoría:</strong> {{this.category}}</p>
        </div>
      </div>
    </div>
    {{/each}}
  </div>

  <form method="POST" action="/api/sessions/logout" class="mb-4 text-end">
  <button class="btn btn-outline-danger">Cerrar Sesión</button>
</form>

</div>
